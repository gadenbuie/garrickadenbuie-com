---
title: Pull Request Flow with usethis
author: Garrick Aden-Buie
date: '2021-10-06'
slug: pull-request-flow-usethis
categories:
  - Blog
tags:
  - R
  - usethis
  - Pull Requests
  - Workflow
description: Choose your own adeventure and get in the 'usethis' pull request flow with this flow chart.
twitterImage: /blog/pull-request-flow-usethis/usethis-pr-flow-social.jpg
rmd_source: 'https://github.com/gadenbuie/garrickadenbuie-com/tree/main/content/blog/2021/pull-request-flow-usethis/index.Rmd'
keywords: rstats
head_custom: |
  <link href="usethis-adventure.css" rel="stylesheet">
  <script src="https://unpkg.com/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js" integrity="sha384-EYn4rWu1DHvYD0sSSSbMEtXQmMl58CFJd897806+RT1jJVYbhuZlZMN6yG9nCyFa" crossorigin="anonymous"></script>
editor_options:
  chunk_output_type: console
---

<script src="{{< blogdown/postref >}}index_files/header-attrs-2.10/header-attrs.js"></script>


<div class="figure">
<a href="usethis-pr-flow-medium.jpg" data-featherlight="image">
<img src="usethis-pr-flow-medium.jpg" alt="A flow chart for the pull request functions in the usethis R package.">
</a>
<p class="caption">
A <code>usethis</code> pull request helper function flow diagram. <a href="#download">Download the image</a> or read a <a href="flowchart/">text version of the flow chart</a>. (<a href="http://creativecommons.org/licenses/by/4.0/">CC BY</a>)
</p>
</div>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>The <span class="pkg"><a href="https://usethis.r-lib.org">usethis</a></span> package is full of incredibly helpful functions
that make life as an R developer easier.
A lot of the package‚Äôs functions target R package maintainers,
but there‚Äôs a small cluster of functions that are life changing
for anyone who uses <code>git</code> or collaborates with others via GitHub<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<p>These pull request helpers all start with the <code>pr_</code> prefix,
but I initially found them a little confusing to use
since they‚Äôre each designed to be called in a specific context ‚Äî
for example, when you have local work that isn‚Äôt associated with a PR
or when a PR exists but you don‚Äôt have the work locally on your computer.</p>
<p>Once I wrapped my head around the functions, though,
using them has utterly transformed my day-to-day workflow.
I can move in and out of collaborative work seamlessly.
The flow chart above is my personal mental model of this cluster of functions
and I hope it helps you make sense of them, too.</p>
<p>There are other great resources available in the <span class="pkg">usethis</span> documentation.
Beyond the <a href="https://usethis.r-lib.org/reference/pull-requests.html">function documentation</a>,
there‚Äôs also the great <a href="https://usethis.r-lib.org/articles/articles/pr-functions.html"><em>Pull request helpers</em> article</a>.
That article walks through a pull request
from the perspective of a contributor
and a package maintainer.</p>
<p>In this blog post, however,
you get to play both roles and choose your own adventure!</p>
</div>
<div id="intro" class="section level2">
<h2>Choose your own pull request adventure</h2>
<p>Welcome to this choose-your-own-adventure blog post.
<span id="instructions">You don‚Äôt need to read this one from top to bottom.
Instead, jumping around is encouraged!</span></p>
<p>Look for the <i class="fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> icon.
It tells you that it‚Äôs time for you make a choice.
But don‚Äôt worry, there‚Äôs no wrong choice:
if you take a wrong turn
you can always use your browser‚Äôs <i class="fas fa-arrow-alt-circle-left" aria-hidden="true" title="Back"></i><span class="sr-only">back</span> button
to retrace your steps.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Ready to get started?</p>
<ul id="intro-options">
<li>
<p>
Yes, <a href="#get-started">I‚Äôm ready to go</a>!
</p>
</li>
</ul>
</div>
</div>
<div id="story-container" class="section level2">
<h2></h2>
<div id="story" aria-live="polite" aria-relevant="additions">

</div>
</div>
<div id="prep-work" class="section level2 step">
<h2>Prep work</h2>
<div id="get-started" class="section level3 step">
<h3>Let‚Äôs get started</h3>
<p>You open your project in RStudio (or the editor of your choice).
You make a note to yourself to come up with a better name for your package ‚Äî
for now you‚Äôre calling it <span class="pkg">acme</span>
because it‚Äôs mostly a collection of random functions you‚Äôve written.</p>
<p>Anyway, you‚Äôre thankful that you closed all of your open files the last time you were working,
but now the empty console beckons.
You‚Äôre ready to do some work.</p>
<p>Where do you begin? With <span class="pkg"><a href="https://usethis.r-lib.org">usethis</a></span> of course.</p>
<pre class="r"><code>library(usethis)</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> That was easy! <a href="#start">Lets do some work now.</a></p>
</div>
</div>
<div id="start" class="section level3 step">
<h3>What‚Äôs next?</h3>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Now you face a tough decision: what do you actually do next?</p>
<ul>
<li><p><a href="#pr-init">Start new work</a></p></li>
<li><p><a href="#pr-resume">Pick up something you were working on</a></p></li>
<li><p><a href="#pr-fetch-review">Review or collaborate with someone else‚Äôs work</a></p></li>
<li><p><a href="#pr-finish-start">Clean up after a PR that‚Äôs been merged</a></p></li>
</ul>
</div>
</div>
<div id="pr-init" class="section level3 step">
<h3>Start new work</h3>
<p>Time to start something new.
You scan your project board, issues list, JIRA tickets, slack messages, emails, and post-it notes
and finally settle on something to work on.
Your task: add an example to the documentation for a function you‚Äôve been working on.</p>
<p>You want to start your work in a new branch,
so you call <code>pr_init()</code>,
giving it the name of your new branch.</p>
<pre class="r"><code>pr_init(&quot;add-example&quot;)</code></pre>
<pre><code>‚úì Setting active project to &#39;/Users/garrick/work/acme&#39;
‚Ñπ Pulling changes from &#39;upstream/main&#39;
‚úì Creating and switching to local branch &#39;add-example&#39;
‚óè Use `pr_push()` to create PR.</code></pre>
<p>The console output reminds you that <span class="pkg">usethis</span> updated your local repo
and created and switched to a new branch for you.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> You‚Äôre ready to <a href="#do-work">do some work</a>.</p>
</div>
</div>
<div id="pr-resume" class="section level3 step">
<h3>Pick up something you were working on</h3>
<p>You‚Äôre ready to get back to that thing you were working on.
Which was what again?
You should probably have another sip of your coffee.
You were doing some work in a branch in your local of the project‚Ä¶</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Do you remember the name of the branch?</p>
<ul>
<li><p><a href="#pr-resume-no-branch">I don‚Äôt remember, remind me</a></p></li>
<li><p><a href="#pr-resume-branch">I remember, it‚Äôs the <code>add-example</code> branch</a></p></li>
</ul>
</div>
</div>
<div id="pr-resume-local" class="section level3 step">
<h3>Get to a local branch</h3>
<p>git branches, you‚Äôve made a few.
But which one you do you want to work in?</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Do you remember the name of the branch?</p>
<ul>
<li><p><a href="#pr-resume-no-branch">I don‚Äôt remember, remind me</a></p></li>
<li><p><a href="#pr-resume-branch">I remember, it‚Äôs the <code>add-example</code> branch</a></p></li>
</ul>
</div>
</div>
<div id="pr-resume-no-branch" class="section level3 step">
<h3>Choose a branch and resume working</h3>
<p>Don‚Äôt worry, <span class="pkg">usethis</span> has your back.
Just run <code>pr_resume()</code> without any arguments
to get a list of local branches available to you.
<code>pr_resume()</code> helpfully sorts the branches by recency of work
and tells you if any of the branches are related to pull requests.</p>
<pre class="r"><code>pr_resume()</code></pre>
<pre><code>‚Ñπ No branch specified ... looking up local branches and associated PRs
Which branch do you want to checkout? (0 to exit)

1:         add-example --&gt; #11 (&#39;@gadenbuie&#39;): Add an example
2: feature-exploration

Selection: 1
‚úì Switching to branch &#39;add-example&#39;
‚úì Pulling from &#39;origin/add-example&#39;
‚Ä¢ Use `pr_push()` to create or update PR.</code></pre>
<p>We picked option <code>1</code> to keep working in our <code>add-example</code> branch.
Notice that, since <code>add-example</code> is related to PR <code>#11</code>,
<code>pr_resume()</code> also did you the extra favor of
making sure that your local copy is up-to-date.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Rock and roll, you‚Äôre ready to <a href="#do-work-yours">get back to work</a>.</p>
</div>
</div>
<div id="pr-resume-branch" class="section level3 step">
<h3>Get back to the branch</h3>
<p>Look at you, smarty pants.
You remember your git branch names!
I‚Äôm proud of you.</p>
<p>Good news,
<code>pr_resume()</code> can switch to the <code>"add-example"</code> branch for you
and it also makes sure that your local copy is up-to-date!</p>
<pre class="r"><code>pr_resume(&quot;add-example&quot;)</code></pre>
<pre><code>‚úì Switching to branch &#39;add-example&#39;
‚úì Pulling from &#39;origin/add-example&#39;
‚Ä¢ Use `pr_push()` to create or update PR.</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Sweat deal! Okay, you‚Äôre ready to <a href="#do-work-yours">keep on working</a>.</p>
</div>
</div>
<div id="pr-fetch-review" class="section level3 step">
<h3>Review or collaborate with someone else‚Äôs work</h3>
<p>Version control software like git
and collaborative coding platforms like GitHub
are plenty of fun when you‚Äôre working on your own.
But they really start to shine when you use them to collaborate with others.</p>
<p>The same is true for the <span class="pkg">usethis</span> PR helper functions.
Setting up your local repo to pull down the changes from a collaborator ‚Äì
changes that probably live in a branch in <em>their copy</em> of the repo ‚Äì
can be a frustrating experience full of online searching
to remember the specific incantations required
to get your collaborators onto your computer and open in front of you.</p>
<p>But have no fear,
<code>pr_fetch()</code> does all of this for you,
in just one command in your R console.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Do you know the pull request number?</p>
<ul>
<li><p><a href="#pr-fetch-no-branch">I don‚Äôt remember, remind me</a></p></li>
<li><p><a href="#pr-fetch-branch">I remember, it‚Äôs PR <code>#14</code></a></p></li>
</ul>
</div>
</div>
<div id="pr-fetch" class="section level3 step">
<h3>Open a remote branch, locally</h3>
<p>The pull request is open on GitHub
and you can see the changes there,
but you just can‚Äôt interact with the code in the same way through the browser.
You have to bring that code into your local IDE
where you can hold it in your hand
and poke it with debuggers.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Do you know the pull request number?</p>
<ul>
<li><p><a href="#pr-fetch-no-branch">I don‚Äôt remember, remind me.</a></p></li>
<li><p><a href="#pr-fetch-branch">I remember, it‚Äôs PR <code>#14</code>.</a></p></li>
</ul>
</div>
</div>
<div id="pr-fetch-no-branch" class="section level3 step">
<h3>Choose a PR and bring the changes onto your computer</h3>
<p>Your friend,
who affectionately calls themselves <code>@wileycoyote</code> on GitHub,
helpfully contributed a new function
to your bag of tricks package, <span class="pkg">acme</span>.
They sent you a message on Slack letting you know they submitted a PR,
but they didn‚Äôt mention the PR number.</p>
<p>No big deal ‚Äî
you can call <code>pr_fetch()</code> from your local repository
without any arguments
and <code>pr_fetch()</code> will look up any open pull requests
and give you the option to pick the one you want.</p>
<pre class="r"><code>pr_fetch()</code></pre>
<pre><code>‚Ñπ No PR specified ... looking up open PRs
Which PR are you interested in? (0 to exit) 

1: &#39;gadenbuie/acme/#11&#39; (@gadenbuie): &#39;Add an example&#39;
2: &#39;gadenbuie/acme/#14&#39; (@wileycoyote): &#39;Model tuning features&#39;

Selection: 2
‚úì Checking out PR &#39;gadenbuie/acme/#14&#39; (@wileycoyote): &#39;Model tuning features&#39;
‚úì Adding remote &#39;wileycoyote&#39; as &#39;git@github.com:wileycoyote/acme.git&#39;
‚úì Creating and switching to local branch &#39;wileycoyote-toone-model&#39;
‚úì Setting &#39;wileycoyote/toone-model&#39; as remote tracking branch</code></pre>
<p>You find your friend‚Äôs PR in the list and choose selection <code>2</code>.
Next time you can perform the same steps by providing the PR number ‚Äî
<code>pr_fetch(14)</code> ‚Äî
or you can use the menu again.
Who has time or brain space to memorize pull request numbers?</p>
<p>Now that you have the code from the PR available to you locally,
you‚Äôre free to poke around to try out the code and review it.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Okay, you‚Äôve had a chance to look at the code, what do you want to do next?</p>
<ul>
<li><p><a href="#do-work-theirs">I want to make some changes to add to the PR.</a></p></li>
<li><p>I reviewed the code and left comments for the PR author in the pull request.</p>
<ul>
<li><p><a href="#pr-forget-theirs">I‚Äôm done with this branch</a>.</p></li>
<li><p><a href="#pr-pause">I‚Äôm done for now, but I‚Äôll probably come back to this branch later</a>.</p></li>
</ul></li>
</ul>
</div>
</div>
<div id="pr-fetch-branch" class="section level3 step">
<h3>Open a PR locally</h3>
<p>You‚Äôve been working with your friend,
<code>@wileycoyote</code>,
on a new set of model tuning functions.
They‚Äôve helpfully started working on a PR,
but since you‚Äôve been reviewing the code carefully
with them over the past few days,
you actually remember the pull request number.
Lucky number <strong>14</strong>.</p>
<pre class="r"><code>pr_fetch(14)</code></pre>
<pre><code>‚úì Checking out PR &#39;gadenbuie/acme/#14&#39; (@wileycoyote): &#39;Model tuning features&#39;
‚úì Switching to branch &#39;wileycoyote-toone-model&#39;</code></pre>
<p>You already have a copy of the PR branch in your local project,
so <code>pr_fetch()</code> simply switched you into
the <code>wileycoyote-toone-model</code> branch
that it created when you first fetched the PR.</p>
<p>Because you might have been doing some work here before,
<code>pr_fetch()</code> does not try to update your local branch.
But you haven‚Äôt done any work yet other than looking at the code,
so you follow up with <code>pr_pull()</code> to pull the latest changes into your project.</p>
<pre class="r"><code>pr_pull()</code></pre>
<pre><code>‚úì Pulling from &#39;wileycoyote/toone-model&#39;</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Now that you have the latest PR code, what do you want to do next?</p>
<ul>
<li><p><a href="#do-work-theirs">I want to make some changes to add to the PR.</a></p></li>
<li><p>I reviewed the code and left comments for the PR author in the pull request.</p>
<ul>
<li><p><a href="#pr-forget-theirs">I‚Äôm done with this branch</a>.</p></li>
<li><p><a href="#pr-pause">I‚Äôm done for now, but I‚Äôll probably come back to this branch later</a>.</p></li>
</ul></li>
</ul>
</div>
</div>
<div id="pr-view-yours" class="section level3 step">
<h3>Open your PR on GitHub</h3>
<p>TK: <code>pr_view()</code></p>
<pre class="r"><code>pr_view()</code></pre>
<pre><code>‚Ñπ Current branch (&#39;add-example&#39;) is connected to PR #11
‚úì Opening URL &#39;https://github.com/gadenbuie/acme/pull/11&#39;</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> When you‚Äôre done with the PR on GitHub,
come back here to decide where you‚Äôre headed next.</p>
<ul>
<li><p>That‚Äôs it for now, I‚Äôm <a href="#pr-pause">ready to start the next thing</a>.</p></li>
<li><p>Hang on, <a href="#fix-something">I found something I need to fix</a>.</p></li>
<li><p>Good news, the pull request was merged and <a href="#pr-finish-yours">I‚Äôm done with this work</a>.</p></li>
<li><p>Changes were made in the PR <a href="#pr-pull">and now I need to update my local copy</a>.</p></li>
<li><p>There were updates in the main branch <a href="#pr-merge-main-yours">and now I want to bring them into my PR branch</a>.</p></li>
<li><p>Actually, the pull request was closed and <a href="#pr-forget-yours">I can forget about this work</a>.</p></li>
</ul>
</div>
</div>
<div id="pr-view-theirs" class="section level3 step">
<h3>Open their PR on GitHub</h3>
<p>TK: <code>pr_view()</code></p>
<pre class="r"><code>pr_view()</code></pre>
<pre><code>‚Ñπ Current branch (&#39;wileycoyote-toone-models&#39;) is connected to PR #14
‚úì Opening URL &#39;https://github.com/gadenbuie/acme/pull/14&#39;</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Welcome back to your project,
I hope everything went well over on GitHub.
Where to next?</p>
<ul>
<li><p>I‚Äôm done here for now, let‚Äôs <a href="#pr-pause">start the next thing</a>.</p></li>
<li><p>Shoot, <a href="#fix-something-theirs">I saw something I need to fix</a>.</p></li>
<li><p>Nothing more with this branch, I can <a href="#pr-forget-theirs">forget all about this PR</a>.</p></li>
<li><p>Changes were made in the PR <a href="#pr-pull-theirs">and now I need to update my local copy</a>.</p></li>
<li><p>There were updates in the main branch <a href="#pr-merge-main-theirs">and now I want to bring them into my PR branch</a>.</p></li>
<li><p>The PR was merged so <a href="#pr-finish-theirs">I‚Äôm all done with this work</a>.</p></li>
</ul>
</div>
</div>
</div>
<div id="do-update" class="section level2 step">
<h2>Update your local copy</h2>
<p>TK: <a href="#do-choose-branch">get to the right branch</a> and then choose <code>pr_pull()</code> or <code>pr_merge_main()</code></p>
<div id="pr-pull" class="section level3 step">
<h3>Update your local copy with a reviewer‚Äôs changes</h3>
<p>Maybe a reviewer <a href="https://docs.github.com/en/github/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/incorporating-feedback-in-your-pull-request#applying-a-suggested-change">suggested changes</a>
and you merged them from the PR page on GitHub.
Maybe a GitHub actions workflow
<a href="https://github.com/r-lib/actions/blob/master/examples/pr-commands.yaml#L45-L75">automatically re-styled your code</a>.
Or maybe you did a little side-project updating on your work computer.</p>
<p>However the changes happened,
the code in the PR branch has changed,
and now you want to <code>pr_pull()</code> those changes into your local copy.</p>
<pre class="r"><code>pr_pull()</code></pre>
<pre><code>‚úì Pulling from &#39;origin/add-example&#39;</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> That was easy! What‚Äôs next?</p>
<ul>
<li><p>I‚Äôm going to <a href="#do-work-yours">write some code in this branch</a>.</p></li>
<li><p>I‚Äôm going to put this down and <a href="#pr-pause">work on something else</a>.</p></li>
<li><p>I just merged this pull request and <a href="#pr-finish-yours">I‚Äôm all done with this work</a>.</p></li>
</ul>
</div>
</div>
<div id="pr-pull-theirs" class="section level3 step">
<h3>Update your local copy with someone else‚Äôs changes</h3>
<p>Changes were made and hopefully the code has been improved,
but you‚Äôd like to run through the changes yourself
to make sure it works as expected.</p>
<p>Use <code>pr_pull()</code> to get the latest changes from the PR branch into your local copy.</p>
<pre class="r"><code>pr_pull()</code></pre>
<pre><code>‚úì Pulling from &#39;wileycoyote/toone-model&#39;</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> That was easy! What‚Äôs next?</p>
<ul>
<li><p>I‚Äôm going to <a href="#do-work-theirs">write some code in this branch</a>.</p></li>
<li><p>I‚Äôm going to put this down and <a href="#pr-pause">work on something else</a>.</p></li>
<li><p>That‚Äôs all I wanted to do, I can <a href="#pr-forget-theirs">forget about this PR now</a>.</p></li>
<li><p>I just merged this pull request and <a href="#pr-finish-theirs">I‚Äôm all done with this work</a>.</p></li>
</ul>
</div>
</div>
<div id="pr-merge-main-yours" class="section level3 step">
<h3>Bring your work up to date with the main branch</h3>
<pre class="r"><code>pr_merge_main()</code></pre>
<pre><code>‚úì Pulling changes from &#39;origin/main&#39; (default branch of source repo)
Merged origin/main into add-example</code></pre>
</div>
<div id="pr-merge-main-theirs" class="section level3 step">
<h3>Bring their work up to date with the main branch</h3>
<pre class="r"><code>pr_merge_main()</code></pre>
<pre><code>‚úì Pulling changes from &#39;origin/main&#39; (default branch of source repo)
Merged origin/main into wileycoyote-toone-model</code></pre>
</div>
<div id="do-choose-branch" class="section level3 step">
<h3>Get to the right place</h3>
<p>Let‚Äôs make sure we‚Äôre in the right branch in your local project.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span>
Which branch do you want to work with right now?</p>
<ul>
<li><p>The one I‚Äôm in right now, so
<a href="#do-work">I‚Äôm ready to get to work</a>!</p></li>
<li><p><a href="#pr-resume-local">A local branch, but not the one I‚Äôm in now</a></p></li>
<li><p><a href="#pr-fetch">A pull request branch I was looking at on GitHub</a></p></li>
</ul>
</div>
</div>
</div>
<div id="work" class="section level2 step">
<h2>Work</h2>
<div id="do-work" class="section level3 step">
<h3>Do some work</h3>
<p>You take a sip of your coffee (or the beverage of your choice),
turn up your favorite
<a href="https://open.spotify.com/playlist/1fk6kpO8nb1KAUc1XAkAJ6">music to write code to</a>
playlist on Spotify,
and line up 25 minutes in your <a href="https://pomofocus.io/">Pomodoro app</a>.</p>
<p>You‚Äôre ready to get something done!
Go write some code.
‚è≤Ô∏è
üßë‚Äçüíª
üéß</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span>
Sweet!
Now that you feel good about your work,
you‚Äôre ready to <a href="#git-commit">take a snapshot of your updates</a>.</p>
</div>
</div>
<div id="do-work-yours" class="section level3 step">
<h3>Keep doing some work</h3>
<blockquote>
<p>Taking breaks and resting is important!</p>
<p>Last night I got caught up in a nested
<a href="https://twitter.com/hashtag/rstats">#RStats</a>
list problem and couldn‚Äôt solve it.</p>
<p>Wrote the code this morning first shot.</p>
<p>Take breaks! You need them!</p>
<p>‚Äî Nicholas Tierney (<span class="citation">@nj_tierney</span>) <a href="https://twitter.com/nj_tierney/status/1117964839127674881">April 16,2019</a></p>
</blockquote>
<p>Sometimes the best thing you can do to solve a problem is give it some time.
Go for a walk, read something engaging, talk to a friend, take a shower.</p>
<p>And now you‚Äôre back with fresh eyes, more energy, and a full cup of coffee.
This time, things go better!
You fall easily into a flow and start writing some code.
As you go,
you periodically pause to stage files with <code>gert::git_add()</code>
or to commit batches of changes with <code>gert::git_commit()</code>.</p>
<p>After a bit you surprise yourself when you realize
that the thing you couldn‚Äôt figure out when you were tired yesterday
you‚Äôve knocked out in an hour.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span>
Happy with your progress, you‚Äôre ready <a href="#pr-push-yours">update the PR with your latest changes</a>.</p>
</div>
</div>
<div id="do-work-theirs" class="section level3 step">
<h3>Collaborate with someone else</h3>
<p>This is exciting!
Your friend ‚Äî
which feels like a totally natural way to describe <code>@wileycoyote</code>,
a person you know primarily from Twitter ‚Äî
had a pretty cool idea
and you‚Äôre feeling the buzz of inspiration.
Even though they started the pull request,
you‚Äôre about to riff on the ideas they started laying down.</p>
<p>You pick out your <a href="https://www.garrickadenbuie.com/project/rsthemes/">favorite RStudio theme</a>
and turn up your favorite dance-slash-coding-slash-singing-out-loud music.</p>
<p>As you work,
you pause occasionally to stage files with <code>gert::git_add()</code>
and to commit them with <code>gert::git_commit()</code>.
Since you‚Äôre working with someone else,
you remember to
<a href="https://xkcd.com/1296/">write good commit messages</a>,
but since you‚Äôre having fun you also use
<a href="https://gitmoji.dev/">gitmoji to give each commit a good emoji.</a></p>
<p>It‚Äôs a lot later than you expect when you start wrapping up.
That‚Äôs okay, <code>@wileycoyote</code> is going to be stoked to see what you‚Äôve been working on!</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span>
Go head and <a href="#pr-push-theirs">update the PR with your latest changes</a>.</p>
</div>
</div>
<div id="git-commit" class="section level3 step">
<h3>Take a snapshot of your work</h3>
<p><em>If you like it then you shoulda made a <code>git commit</code>.</em></p>
<p>There are two parts to taking a snapshot of your code.
And really,
it‚Äôs less like taking a picture and more like sending yourself an email
with a copy of your files.</p>
<p>First, you‚Äôll pick the files that you want to add to the snapshot (or commit).
You can do this in the R console using <code>git_add()</code> from the <span class="pkg"><a href="https://docs.ropensci.org/gert/">gert</a></span> package.
Give the function a vector with the paths to the files you changed.</p>
<pre class="r"><code>gert::git_add(c(&quot;R/atom_arranger.R&quot;, &quot;man/atom_arranger.Rd&quot;))</code></pre>
<p>In git-speak,
<code>git_add()</code> adds the changes in the listed files to a staging area.
Running this command is like dragging a file into the email you‚Äôre writing.
We haven‚Äôt officially sent that email yet,
but we have a copy ready to go.
By the way,
you can still make more changes to the file
knowing that there‚Äôs a temporary copy in that email draft
in case anything goes wrong.</p>
<p>Then, once all the files you want to commit have been added,
you <em>commit</em> the changes.
In our email metaphor,
committing is a lot like pressing send on the email.</p>
<p>And just like an email,
the commit includes a message
where you can describe the updates you made to the files in the email (commit).</p>
<p>For this step you can use
<code>git_commit()</code>
(also from the <span class="pkg"><a href="https://docs.ropensci.org/gert/">gert</a></span> package)
which takes the commit message as a parameter.
Think of this message like the subject of an email to your future self.</p>
<pre class="r"><code>gert::git_commit(&quot;Add an example to ?atom_arranger()&quot;)</code></pre>
<p><em>P.S. You can do this adding-and-committing dance in the <a href="https://happygitwithr.com/rstudio-git-github.html">Git pane in RStudio</a>, too.</em></p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Are you ready to share your work?</p>
<ul>
<li><p>Yes! I‚Äôm ready to <a href="#pr-push-new">push your changes out into the world</a>.</p></li>
<li><p>Not yet, I want to <a href="#do-work">keep on working on this</a>.</p></li>
<li><p>Actually, I don‚Äôt think I‚Äôm on the right track here.
I‚Äôd <a href="#pr-forget-yours">rather back out of this branch and forget all about it</a>.</p></li>
</ul>
</div>
</div>
<div id="fix-something" class="section level3 step">
<h3>Fix something</h3>
<p>Oh no, you need to fix something!
I hope it‚Äôs just a typo and not a big scary error!
But first‚Ä¶</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span>
This thing that needs to be fixed ‚Äî
<a href="#do-choose-branch">what branch is it in</a>?</p>
</div>
</div>
<div id="fix-something-theirs" class="section level3 step">
<h3>Fix something</h3>
<p>Oh no, you need to fix something!
I hope it‚Äôs just a typo and not a big scary error!
But first‚Ä¶</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span>
This thing that needs to be fixed ‚Äî what branch is it in?</p>
<ul>
<li><p>The one I‚Äôm in right now, so
<a href="#do-work-theirs">I‚Äôm ready to get to work</a>!</p></li>
<li><p><a href="#pr-resume-local">A local branch, but not the one I‚Äôm in now.</a></p></li>
<li><p><a href="#pr-fetch">A pull request branch I was looking at on GitHub.</a></p></li>
</ul>
</div>
</div>
<div id="fix-something-yours" class="section level3 step">
<h3>Fix something</h3>
<p>Oh no, you need to fix something!
I hope it‚Äôs just a typo and not a big scary error!
But first‚Ä¶</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span>
This thing that needs to be fixed ‚Äî what branch is it in?</p>
<ul>
<li><p>The one I‚Äôm in right now, so
<a href="#do-work-yours">I‚Äôm ready to get to work</a>!</p></li>
<li><p><a href="#pr-resume-local">A local branch, but not the one I‚Äôm in now</a></p></li>
<li><p><a href="#pr-fetch">A pull request branch I was looking at on GitHub</a></p></li>
</ul>
</div>
</div>
</div>
<div id="share-your-work" class="section level2 step">
<h2>Share your work</h2>
<p>Fantastic!
Your work is awesome and everyone is going to be happy to try it out.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Let‚Äôs get your work off of your computer and out into the world.</p>
<ul>
<li><p>This <a href="#pr-push-new">new work you‚Äôre sharing for the first time</a>.</p></li>
<li><p>I‚Äôm <a href="#pr-push-yours">updating a pull request that I created</a>.</p></li>
<li><p>I‚Äôm <a href="#pr-push-theirs">updating a pull request from someone else</a>.</p></li>
</ul>
</div>
<div id="pr-push-new" class="section level3 step">
<h3>Create a new pull request</h3>
<p>Fantastic!
Your work is awesome and everyone is going to be happy to try it out.</p>
<p>Let‚Äôs get your work off of your computer and out into the world.
To create a new pull request, you call <code>pr_push()</code>.</p>
<pre class="r"><code>pr_push()</code></pre>
<pre><code>‚úî Pushing local &#39;add-example&#39; branch to &#39;origin:add-example&#39;
‚úî Setting upstream tracking branch for &#39;add-example&#39; to &#39;origin/add-example&#39;
‚úî Create PR at link given below
‚úî Opening URL &#39;https://github.com/gadenbuie/acme/compare/add-example&#39;</code></pre>
<p><code>pr_push()</code> sends the local changes in your new branch to GitHub,
and opens a browser window where you can review your changes once more.
If everything looks good,
go ahead click the <em>Create Pull Request</em> button.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Good job! How are you feeling now?</p>
<ul>
<li><p>I‚Äôm on a roll, let‚Äôs <a href="#pr-pause">start the next thing</a>.</p></li>
<li><p>I‚Äôd want to <a href="#pr-view-yours">open the PR on GitHub again</a>.</p></li>
<li><p>Oh shoot, <a href="#fix-something">I saw something I need to fix</a>.</p></li>
<li><p>Great, that pull request was just merged and <a href="#pr-finish-yours">I‚Äôm done with this work</a>.</p></li>
<li><p>Changes were made in the PR <a href="#pr-pull">and now I need to update my local copy</a>.</p></li>
<li><p>There were updates in the main branch <a href="#pr-merge-main-yours">and now I want to bring them into my PR branch</a>.</p></li>
<li><p>Actually, the pull request was closed and <a href="#pr-forget-yours">I can forget about this work</a>.</p></li>
</ul>
</div>
</div>
<div id="pr-push-yours" class="section level3 step">
<h3>Update your existing pull request</h3>
<p>You just made <a href="#git-commit">and committed</a>
some changes to an existing PR you created,
and now you‚Äôd like to update that PR on GitHub.
<code>pr_push()</code> also does this for you!
Helpfully, before it pushes it checks to make sure your local branch is up-to-date.</p>
<pre class="r"><code>pr_push()</code></pre>
<pre><code>‚úî Checking that local branch &#39;add-example&#39; has the changes in &#39;origin/add-example&#39;
‚úî Pushing local &#39;add-example&#39; branch to &#39;origin:add-example&#39;
‚úî View PR at &#39;https://github.com/gadenbuie/acme/pull/10&#39; or call `pr_view()`</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Phenomenal! What do you want to do next?</p>
<ul>
<li><p>I want to <a href="#pr-view-yours">take a look at the PR on GitHub</a>.</p></li>
<li><p>Rock on! I‚Äôm moving on to <a href="#pr-pause">start the next thing</a>.</p></li>
<li><p>Wait a second, <a href="#fix-something-yours">I saw something I need to fix</a>.</p></li>
<li><p>Changes were made in the PR <a href="#pr-pull">and now I need to update my local copy</a>.</p></li>
<li><p>There were updates in the main branch <a href="#pr-merge-main-yours">and now I want to bring them into my PR branch</a>.</p></li>
<li><p>The PR has been merged and <a href="#pr-finish-yours">I‚Äôm all done with this work</a>.</p></li>
<li><p>Never mind, my <a href="#pr-forget-yours">PR was closed and I‚Äôd like to forget about this work</a>.</p></li>
</ul>
</div>
</div>
<div id="pr-push-theirs" class="section level3 step">
<h3>Update someone else‚Äôs pull request</h3>
<p>At this point,
you have changes in your local copy of your PR branch
that you need to push out to the source branch for the PR,
which happens to be in <code>@wileycoyote</code>‚Äôs fork of your repo.</p>
<p><code>pr_push()</code> is very smart and knows how to send the changes to the correct repository,
pushing to the <code>toone-model</code> in the <code>wileycoyote/acme</code>.</p>
<pre class="r"><code>pr_push()</code></pre>
<pre><code>‚úî Checking that local branch &#39;wileycoyote-toone-model&#39; has the changes in &#39;wileycoyote/toone-model&#39;
‚úî Pushing local &#39;wileycoyote-toone-model&#39; branch to &#39;wilecoyote:toone-model&#39;
‚úî View PR at &#39;https://github.com/gadenbuie/acme/pull/14&#39; or call `pr_view()`</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Phenomenal! What do you want to do next?</p>
<ul>
<li><p>I want to <a href="#pr-view-theirs">take a look at the PR on GitHub</a>.</p></li>
<li><p>Beep, beep! I‚Äôm moving on to <a href="#pr-pause">start the next thing</a>.</p></li>
<li><p>Hang on, <a href="#fix-something-theirs">I saw something I need to fix</a>.</p></li>
<li><p>That‚Äôs all I wanted to do, I can <a href="#pr-forget-theirs">forget about this PR now</a>.</p></li>
<li><p>Changes were made in the PR <a href="#pr-pull-theirs">and now I need to update my local copy</a>.</p></li>
<li><p>There were updates in the main branch <a href="#pr-merge-main-theirs">and now I want to bring them into my PR branch</a>.</p></li>
<li><p>I just merged this pull request and <a href="#pr-finish-theirs">I‚Äôm all done with this work</a>.</p></li>
</ul>
</div>
</div>
</div>
<div id="wrap-up" class="section level2 step">
<h2>Wrap Up</h2>
<div id="pr-pause" class="section level3 step">
<h3>Pause your work</h3>
<p>You‚Äôre done but you have a feeling you‚Äôll be back here again soon.
What you need is a little <em>pause</em>.</p>
<p>Call <code>pr_pause()</code> to switch from the current branch back to the default branch,
and to make sure you‚Äôve got the latest changes in the default branch.
Don‚Äôt worry,
the work will be waiting patiently for you in a local branch
when you‚Äôre ready to come back to it.</p>
<pre class="r"><code>pr_pause()</code></pre>
<pre><code>‚úì Switching back to default branch (&#39;main&#39;)
‚úì Pulling changes from &#39;origin/main&#39;</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> <a href="#start">Go back to Start</a> to decide to decide what‚Äôs next in your adventure.</p>
</div>
</div>
<div id="pr-finish-start" class="section level3 step">
<h3>Finish up your work</h3>
<p>Hooray!
A PR was merged and the new code is now in the default branch.
That‚Äôs one less branch you need to keep around on your computer.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Was this PR yours?</p>
<ul>
<li><p><strong>Yes</strong>, and‚Ä¶</p>
<ul>
<li><p><a href="#pr-finish-yours">I‚Äôm still in the PR branch in my local project</a></p></li>
<li><p><a href="#pr-finish-number">I‚Äôm in the main branch now, but I have the PR branch here somewhere</a></p></li>
</ul></li>
<li><p><strong>No</strong>, and‚Ä¶</p>
<ul>
<li><p><a href="#pr-finish-theirs">I‚Äôm still in the PR branch in my local project</a></p></li>
<li><p><a href="#pr-finish-number">I‚Äôm in the main branch now, but I have the PR branch here somewhere</a></p></li>
</ul></li>
</ul>
</div>
</div>
<div id="pr-finish-yours" class="section level3 step">
<h3>Finish your work</h3>
<p>Congrats! Your pull request was merged!
That‚Äôs awesome.
Now it‚Äôs time to wrap things up by calling <code>pr_finish()</code>.</p>
<pre class="r"><code>pr_finish()</code></pre>
<pre><code>‚úì Checking that remote branch &#39;origin/add-example&#39; has the changes in &#39;add-example&#39;
‚úì Switching back to default branch (&#39;main&#39;)
‚Ñπ Pulling changes from &#39;origin/main&#39;
‚úì Deleting local &#39;add-example&#39; branch</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> <a href="#start">Go back to Start</a> to decide what‚Äôs next in your adventure.</p>
</div>
</div>
<div id="pr-finish-theirs" class="section level3 step">
<h3>Finish your work</h3>
<p>Well done,
your collaboration with <code>@wileycoyote</code> is complete and their PR is merged!
That‚Äôs awesome.
Now it‚Äôs time to wrap things up by calling <code>pr_finish()</code>.</p>
<pre class="r"><code>pr_finish()</code></pre>
<pre><code>‚úî Checking that remote branch &#39;wileycoyote/toone-model&#39; has the changes in &#39;local/wileycoyote-toone-model&#39;
‚úî Switching back to &#39;main&#39; branch
‚úî Pulling changes from GitHub source repo &#39;origin/main&#39;
‚úî Deleting local &#39;wileycoyote-toone-model&#39; branch
‚úî Removing remote &#39;wileycoyote&#39;</code></pre>
<p>Notice that <code>pr_finish()</code> does quite a lot!
It makes sure that you don‚Äôt accidentally leave behind
some changes in your local branch that might have forgotten to push.
Then it switches back to <code>main</code> and makes sure that‚Äôs up to date, too.
Finally we forget all about <code>@wileycote</code>‚Äôs branch and forked repo.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span>
That‚Äôs all folks!
<a href="#start">Head back to the beginning</a> to choose your next adventure.</p>
</div>
</div>
<div id="pr-finish-number" class="section level3 step">
<h3>Clean up now that the PR has been merged</h3>
<p>You don‚Äôt have to be in your local copy of the PR branch
if you know the PR number.
Give the number to <code>pr_finish()</code>
and it will do the rest for you:
it moves back to the default branch,
updates your local copy,
and deletes the old PR branch.</p>
<pre class="r"><code>pr_finish(11)</code></pre>
<pre><code>‚úì Checking that remote branch &#39;origin/add-example&#39; has the changes in &#39;add-example&#39;
‚úì Switching back to default branch (&#39;main&#39;)
‚Ñπ Pulling changes from &#39;origin/main&#39;
‚úì Deleting local &#39;add-example&#39; branch</code></pre>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> <a href="#start">Go back to Start</a> to decide what‚Äôs next in your adventure.</p>
</div>
</div>
<div id="pr-forget-yours" class="section level3 step">
<h3>Forget about your work</h3>
<p>Well that was fun.
But now you‚Äôre done with this branch
and you call <code>pr_forget()</code> to delete it from your local copy.</p>
<pre class="r"><code>pr_forget()</code></pre>
<pre><code>Local branch &#39;add-example&#39; has no associated remote branch.
If we delete &#39;add-example&#39;, any work that exists only on this branch work may be hard for you to recover.
Proceed anyway?

1: No way
2: Not now
3: Yes

Selection: 3
‚úì Switching back to default branch (&#39;main&#39;)
‚úì Pulling changes from &#39;origin/main&#39;
‚úì Deleting local &#39;add-example&#39; branch</code></pre>
<p>Notice that <code>pr_forget()</code> warns you about any work you might lose
and gives you a chance to rethink it.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> <a href="#start">Go back to Start</a> to decide what‚Äôs next in your adventure.</p>
</div>
</div>
<div id="pr-forget-theirs" class="section level3 step">
<h3>Forget about their work</h3>
<p>Your work here is done and you‚Äôd like to move on with your life.
<code>pr_forget()</code> lets you put this branch behind you.
And while it‚Äôs in there,
it also cleans up your repo,
deleting the local copy of the PR branch
and removing the PR author‚Äôs repo fork
from the list of remote repositories your git project could sync with.</p>
<pre class="r"><code>pr_forget()</code></pre>
<pre><code>‚úì Switching back to default branch (&#39;main&#39;)
‚úì Pulling changes from &#39;origin/main&#39;
‚úì Deleting local &#39;wileycoyote-toone-models&#39; branch
‚úì Removing remote &#39;wileycoyote&#39;</code></pre>
<p>That was smooth!
Notice that <code>pr_forget()</code> moved you into the default branch of your repo,
<code>main</code>,
and it even made sure that branch is up to date.</p>
<p><code>pr_forget()</code> is safe and cautious.
If your local <code>wileycoyote-toone-models</code> branch
had had any changes in it that you might have lost,
<code>pr_forget()</code> would have warned you.
You also know that you can get back to the PR branch any time
using <code>pr_fetch()</code>.</p>
<div class="decision">
<p><i class="way-point fas fa-map-signs" aria-hidden="true" title="Decision Time"></i><span class="sr-only">Decision time:</span> Worry and care-free, you <a href="#start">head back to the beginning</a> to decide what‚Äôs next in your adventure.</p>
</div>
</div>
</div>
<div id="section" class="section level2">
<h2></h2>
<div id="step-list" style="display:none">

</div>
<div id="story-reset">
<a href="#intro"><i aria-hidden="true" class="fas fa-undo-alt"></i> Start over</a>
</div>
</div>
<div id="download" class="section level2">
<h2>Download the usethis <code>pr_*()</code> flow chart</h2>
<ul>
<li><a href="usethis-pr-flow.jpg">Small JPG Image (190 KB)</a></li>
<li><a href="usethis-pr-flow-medium.jpg">Medium JPG Image (511 KB)</a></li>
<li><a href="usethis-pr-flow-large.jpg">Large JPG Image (1.36 MB)</a></li>
<li><a href="usethis-pr-flow.svg">SVG (40 KB)</a></li>
<li><a href="usethis-pr-flow-editable.svg">SVG, Editable (40 KB)</a></li>
<li><a href="usethis-pr-flow.drawio">Source File <code>.drawio</code> (4 KB)</a></li>
</ul>
<div class="cc-box">
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
  <img alt="Creative Commons License" style="border-width:0;margin-right:1em;" src="https://i.creativecommons.org/l/by/4.0/88x31.png" align="left" />
</a>
<em xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/StillImage" property="dct:title" rel="dct:type">
  Pull Request Flow with usethis
</em>
by 
<a xmlns:cc="http://creativecommons.org/ns#" href="https://www.garrickadenbuie.com/blog/pull-request-flow-usethis" property="cc:attributionName" rel="cc:attributionURL">
Garrick Aden-Buie
</a> is licensed under a 
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
</div>
<script src="usethis-adventure.js"></script>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>I primarily use GitHub, but I think these functions will generally work for other code-hosting platforms as well, like GitLab or others.<a href="#fnref1" class="footnote-back">‚Ü©Ô∏é</a></p></li>
</ol>
</div>
